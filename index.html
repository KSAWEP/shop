
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>متجر Moon - تصاميم المواقع والهوية البصرية المحترفة</title>
    <meta name="description" content="متجر Moon متخصص في تصميم المواقع، الهوية البصرية، المتاجر الإلكترونية وقوالب Canva بأسعار تنافسية. خدمات تقنية احترافية مع ضمان الجودة والتميز">
    <link rel="icon" href="https://j.top4top.io/p_3516ipo3r1.png" type="image/png">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;700;900&display=swap" rel="stylesheet">
    <link rel="preload" href="https://k.top4top.io/p_3519v76yk1.png" as="image">
    
    <style>
        :root {
            --primary-color: #1e40af;
            --secondary-color: #2563eb;
            --accent-color: #3b82f6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --text-primary: #ffffff;
            --text-secondary: #cbd5e1;
            --bg-dark: #0f172a;
            --bg-card: rgba(37, 99, 235, 0.1);
            --border-color: rgba(59, 130, 246, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }

        body {
            font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, #1e40af 50%, #1f2937 100%);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            opacity: 0;
            animation: pageLoadIn 0.8s ease-out forwards;
        }

        @keyframes pageLoadIn {
            0% { opacity: 0; transform: scale(1.05); }
            100% { opacity: 1; transform: scale(1); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            height: 55px;
            width: 55px;
            border-radius: 18px;
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
            transition: all 0.3s ease;
        }

        .brand-name {
            color: var(--text-primary);
            font-size: 1.8rem;
            font-weight: 900;
            background: linear-gradient(45deg, #3b82f6, #2563eb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 10px;
            align-items: center;
        }

        .nav-links a {
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            padding: 12px 18px;
            border-radius: 25px;
            background: rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .nav-links a:hover,
        .nav-links a.active {
            transform: translateY(-2px);
            background: linear-gradient(45deg, var(--secondary-color), var(--accent-color));
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
        }

        .cart-icon, .whatsapp-btn {
            position: relative;
            background: rgba(0, 0, 0, 0.6);
            padding: 12px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
        }

        .whatsapp-btn {
            background: linear-gradient(45deg, #25D366, #128C7E) !important;
            color: white !important;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: linear-gradient(45deg, var(--error-color), #dc2626);
            color: white;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            font-size: 11px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .page-section {
            min-height: 100vh;
            padding-top: 90px;
            background: transparent;
            color: var(--text-primary);
        }

        .page-section.active { display: block; }
        .page-section:not(.active) { display: none; }

        .hero {
            padding: 100px 0;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(37, 99, 235, 0.05) 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
        }

        .hero-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            gap: 60px;
        }

        .hero-text {
            flex: 1;
            text-align: left;
        }

        .hero-text h1 {
            font-size: 3.5rem;
            margin-bottom: 25px;
            color: var(--text-primary);
            font-weight: 900;
        }

        .hero-text p {
            font-size: 1.3rem;
            margin-bottom: 35px;
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .announcement-box {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(37, 99, 235, 0.08));
            border: 2px solid rgba(59, 130, 246, 0.4);
            border-radius: 20px;
            padding: 25px;
            margin: 30px 0;
            text-align: center;
            backdrop-filter: blur(15px);
            box-shadow: 0 15px 35px rgba(59, 130, 246, 0.3);
        }

        .announcement-box h3 {
            color: var(--secondary-color);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .announcement-highlight {
            color: #60a5fa;
            font-weight: 700;
            padding: 2px 8px;
            background: rgba(96, 165, 250, 0.2);
            border-radius: 8px;
        }

        .cta-button, .secondary-button {
            color: var(--text-primary);
            padding: 18px 35px;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            display: inline-block;
        }

        .cta-button {
            background: linear-gradient(45deg, var(--secondary-color), var(--accent-color));
            box-shadow: 0 15px 35px rgba(59, 130, 246, 0.4);
        }

        .secondary-button {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
        }

        .cta-button:hover, .secondary-button:hover {
            transform: translateY(-3px);
        }

        .hero-actions {
            display: flex;
            gap: 20px;
            justify-content: flex-start;
        }

        .hero-image {
            flex: 0.8;
            display: flex;
            justify-content: flex-end;
        }

        .hero-image img {
            width: 100%;
            max-width: 500px;
            height: auto;
            border-radius: 25px;
            box-shadow: 0 25px 50px rgba(59, 130, 246, 0.4);
            object-fit: cover;
            cursor: pointer;
            transition: all 0.4s ease;
        }

        .hero-image img:hover {
            transform: scale(1.05);
            box-shadow: 0 35px 70px rgba(59, 130, 246, 0.6);
        }

        .section-title {
            text-align: center;
            font-size: 3rem;
            margin-bottom: 70px;
            color: var(--secondary-color);
            font-weight: 900;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(45deg, var(--secondary-color), var(--accent-color));
            border-radius: 2px;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 35px;
            margin-top: 50px;
        }

        .product-card {
            background: linear-gradient(145deg, var(--bg-card), rgba(59, 130, 246, 0.05));
            border-radius: 25px;
            overflow: hidden;
            transition: all 0.4s ease;
            border: 2px solid var(--border-color);
            position: relative;
            backdrop-filter: blur(15px);
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-15px) scale(1.02);
            box-shadow: 0 30px 60px rgba(59, 130, 246, 0.3);
            border-color: rgba(59, 130, 246, 0.5);
        }

        .product-content {
            padding: 35px;
        }

        .product-title {
            color: var(--accent-color);
            font-size: 1.6rem;
            font-weight: 700;
            margin-bottom: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .product-description {
            color: var(--text-secondary);
            margin-bottom: 25px;
            font-size: 1.05rem;
            line-height: 1.7;
        }

        .product-features {
            list-style: none;
            margin: 25px 0;
        }

        .product-features li {
            color: var(--text-primary);
            margin: 12px 0;
            font-size: 0.95rem;
            position: relative;
            padding-right: 25px;
        }

        .product-features li::before {
            content: "✅";
            position: absolute;
            right: 0;
            top: 0;
        }

        .product-price {
            font-size: 2rem;
            font-weight: 900;
            color: var(--accent-color);
            margin: 25px 0;
            text-align: center;
            background: linear-gradient(45deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.05));
            padding: 20px;
            border-radius: 18px;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .add-to-cart {
            width: 100%;
            background: linear-gradient(45deg, var(--secondary-color), var(--accent-color));
            color: var(--text-primary);
            border: none;
            padding: 18px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .add-to-cart:hover {
            background: linear-gradient(45deg, var(--accent-color), #2563eb);
            transform: translateY(-2px);
        }

        .add-to-cart.loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .add-to-cart.loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid #ffffff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Package Cards */
        .premium-package {
            border: 2px solid rgba(99, 102, 241, 0.5);
            background: linear-gradient(145deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.05));
        }

        .gold-package {
            border: 2px solid rgba(245, 158, 11, 0.5);
            background: linear-gradient(145deg, rgba(245, 158, 11, 0.1), rgba(249, 115, 22, 0.05));
        }

        .silver-package {
            border: 2px solid rgba(100, 116, 139, 0.5);
            background: linear-gradient(145deg, rgba(100, 116, 139, 0.1), rgba(71, 85, 105, 0.05));
        }

        /* Cart Sidebar */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -450px;
            width: 450px;
            height: 100vh;
            background: linear-gradient(145deg, rgba(15, 23, 42, 0.98), rgba(30, 41, 59, 0.98));
            z-index: 2000;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-left: 2px solid var(--border-color);
            overflow-y: auto;
            backdrop-filter: blur(20px);
        }

        .cart-sidebar.open { right: 0; }

        .checkout-btn {
            width: 100%;
            background: linear-gradient(45deg, var(--success-color), #059669);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .checkout-btn:hover {
            background: linear-gradient(45deg, #059669, #047857);
            transform: translateY(-2px);
        }

        .checkout-btn.loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .checkout-btn.loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid #ffffff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            z-index: 5000;
            padding: 18px 28px;
            border-radius: 50px;
            color: white;
            font-weight: 600;
            font-size: 1rem;
            transform: translateX(400px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(15px);
            max-width: 350px;
        }

        .notification.show { transform: translateX(0); }
        .notification.success { background: linear-gradient(45deg, var(--success-color), #059669); }
        .notification.error { background: linear-gradient(45deg, var(--error-color), #dc2626); }
        .notification.info { background: linear-gradient(45deg, #0ea5e9, #0284c7); }

        /* Order Success Modal */
        .order-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 6000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .order-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--bg-card);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            margin: 20px;
            border: 2px solid var(--border-color);
        }

        /* Mobile Menu */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
            }

            .nav-links {
                position: fixed;
                top: 90px;
                right: -100%;
                width: 280px;
                background: rgba(15, 23, 42, 0.98);
                backdrop-filter: blur(20px);
                padding: 30px 20px;
                border-radius: 0 0 0 25px;
                transition: all 0.3s ease;
                flex-direction: column;
                gap: 15px;
                height: calc(100vh - 90px);
                overflow-y: auto;
            }

            .nav-links.open {
                right: 0;
            }

            .hero-content {
                flex-direction: column;
                gap: 40px;
                text-align: center;
            }

            .hero-text h1 {
                font-size: 2.5rem;
            }

            .hero-actions {
                justify-content: center;
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }

            .cta-button, .secondary-button {
                width: 100%;
                max-width: 300px;
                padding: 20px 30px;
            }

            .products-grid {
                grid-template-columns: 1fr;
                gap: 25px;
            }

            .section-title {
                font-size: 2.2rem;
            }

            .cart-sidebar { width: 100%; right: -100%; }
        }

        .about-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            margin-top: 40px;
        }

        .about-text {
            color: var(--text-primary);
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .about-features {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid var(--border-color);
        }

        .about-features ul {
            list-style: none;
        }

        .about-features li {
            color: var(--text-primary);
            margin: 10px 0;
            padding-right: 20px;
        }

        /* Footer */
        footer {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(15, 23, 42, 0.9));
            padding: 60px 0 30px;
            text-align: center;
            border-top: 2px solid var(--border-color);
            margin-top: 80px;
            color: var(--text-primary);
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 30px;
        }

        .footer-social {
            display: flex;
            gap: 20px;
        }

        .footer-social a {
            color: var(--accent-color);
            font-size: 1.8rem;
            transition: all 0.3s ease;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(139, 92, 246, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header id="main-header">
        <nav class="container">
            <div class="nav-brand">
                <img src="https://h.top4top.io/p_3519vd92e1.png" alt="Moon Store Logo" class="logo">
                <span class="brand-name">Moon</span>
            </div>
            <ul class="nav-links" id="nav-links">
                <li><a onclick="showPage('contact'); closeMobileMenu()">تواصل معنا</a></li>
                <li><a onclick="showPage('faq'); closeMobileMenu()">الأسئلة الشائعة</a></li>
                <li><a onclick="showPage('features'); closeMobileMenu()">مميزاتنا</a></li>
                <li><a onclick="showPage('about'); closeMobileMenu()">من نحن</a></li>
                <li><a onclick="showPage('store'); closeMobileMenu()">المتجر</a></li>
                <li><a onclick="showPage('home'); closeMobileMenu()" class="active">الرئيسية</a></li>
                <li>
                    <div class="cart-icon" onclick="toggleCart()">
                        <span class="material-icons">shopping_cart</span>
                        <span class="cart-count" id="cart-count">0</span>
                    </div>
                </li>
                <li>
                    <a href="https://wa.me/966571653884?text=السلام عليكم" target="_blank" class="whatsapp-btn">
                        <span class="material-icons">chat</span>
                    </a>
                </li>
            </ul>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <span class="material-icons">menu</span>
            </button>
        </nav>
    </header>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cart-sidebar">
        <div class="cart-header" style="padding: 30px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; background: var(--bg-card);">
            <h3 class="cart-title" style="color: var(--accent-color); font-size: 1.4rem; font-weight: 700;">
                <span class="material-icons" style="vertical-align: middle; margin-left: 8px;">shopping_cart</span>
                سلة التسوق
            </h3>
            <button class="close-cart" onclick="closeCart()" style="background: none; border: none; color: var(--text-primary); font-size: 1.8rem; cursor: pointer;">×</button>
        </div>
        <div class="cart-items" id="cart-items" style="padding: 20px; min-height: 300px;">
            <div class="empty-cart" style="text-align: center; color: #ccc; padding: 40px 20px;">
                <span class="material-icons" style="font-size: 3rem; opacity: 0.5;">shopping_cart</span>
                <p>السلة فارغة</p>
                <p style="font-size: 0.9rem; color: #999; margin-top: 10px;">أضف منتجات لتبدأ التسوق</p>
            </div>
        </div>
        <div class="cart-footer" id="cart-footer" style="display: none; position: absolute; bottom: 0; left: 0; right: 0; padding: 25px; background: rgba(0, 0, 0, 0.9);">
            <div class="cart-total" id="cart-total" style="color: var(--accent-color); font-size: 1.3rem; font-weight: bold; margin-bottom: 15px; text-align: center;">الإجمالي: 0 ريال</div>
            <button class="checkout-btn" id="checkout-btn" onclick="proceedToCheckout()">
                <span class="material-icons">rocket_launch</span>
                إتمام الطلب
            </button>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay" onclick="closeCart()" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 1500; opacity: 0; visibility: hidden; transition: all 0.3s ease;"></div>

    <!-- Order Success Modal -->
    <div class="order-modal" id="order-modal">
        <div class="modal-content">
            <div style="font-size: 4rem; color: var(--success-color); margin-bottom: 20px;">🎉</div>
            <h3 style="color: var(--success-color); margin-bottom: 15px;">تم إنشاء الطلب بنجاح!</h3>
            <p style="color: var(--text-secondary); margin-bottom: 20px;">سيتم توجيهك لصفحة الدفع الآن...</p>
            <div id="order-details"></div>
            <button onclick="closeOrderModal()" style="margin-top: 20px; padding: 10px 20px; background: var(--accent-color); color: white; border: none; border-radius: 20px; cursor: pointer;">إغلاق</button>
        </div>
    </div>

    <!-- Home Page -->
    <section id="home" class="page-section active">
        <div class="hero">
            <div class="container">
                <div class="hero-content">
                    <div class="hero-text">
                        <h1>متجر Moon</h1>
                        <p>نحن متخصصون في تصميم الهوية البصرية، المواقع الإلكترونية، المتاجر الإلكترونية، مواقع سيرفرات FiveM، وقوالب Canva بأسعار تنافسية</p>
                        
                        <div class="announcement-box">
                            <h3>
                                <span class="material-icons" style="vertical-align: middle; margin-left: 8px;">local_fire_department</span>
                                عرض محدود - خصم 50%
                            </h3>
                            <p>استخدم كود <span class="announcement-highlight">SA50</span> واحصل على خصم <span class="announcement-highlight">50%</span> على جميع الخدمات</p>
                        </div>
                        
                        <div class="hero-actions">
                            <button class="cta-button" onclick="showPage('store')">تسوق الآن</button>
                            <button class="secondary-button" onclick="showPage('contact')">تواصل معنا</button>
                        </div>
                    </div>
                    <div class="hero-image">
                        <img src="https://k.top4top.io/p_3519v76yk1.png" 
                             alt="Moon Store Design" 
                             onclick="openImageModal(this.src)" />
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Store Page -->
    <section id="store" class="page-section">
        <div class="container">
            <h2 class="section-title">منتجاتنا وباقاتنا المتميزة</h2>
            
            <div class="products-grid">
                <!-- الباقة الماسية -->
                <div class="product-card premium-package" data-product="diamond-package">
                    <div style="width: 100%; height: 300px; background: linear-gradient(45deg, #6366f1, #8b5cf6); display: flex; align-items: center; justify-content: center;">
                        <img src="https://g.top4top.io/p_3520938n81.png" alt="الباقة الماسية" style="width: 100%; height: 100%; object-fit: contain;">
                    </div>
                    <div class="product-content">
                        <div style="position: absolute; top: 15px; right: 15px; background: linear-gradient(45deg, #6366f1, #8b5cf6); color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.8rem; font-weight: bold;">الماسية</div>
                        <h3 class="product-title">
                            <span class="material-icons">workspace_premium</span>
                            الباقة الماسية
                        </h3>
                        <p class="product-description">باقة شاملة ومتكاملة تضم جميع الخدمات المتقدمة لبناء حضورك الرقمي</p>
                        <div style="font-size: 2rem; font-weight: 900; color: var(--accent-color); margin: 25px 0; text-align: center; background: linear-gradient(45deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.05)); padding: 20px; border-radius: 18px;">350 ريال</div>
                        <button class="add-to-cart" data-id="diamond-package" data-name="الباقة الماسية" data-price="350">
                            <span class="material-icons">add_shopping_cart</span>
                            أضف للسلة
                        </button>
                    </div>
                </div>

                <!-- الباقة الذهبية -->
                <div class="product-card gold-package" data-product="gold-package">
                    <div style="width: 100%; height: 300px; background: linear-gradient(45deg, #f59e0b, #f97316); display: flex; align-items: center; justify-content: center;">
                        <img src="https://e.top4top.io/p_3520awvcr1.png" alt="الباقة الذهبية" style="width: 100%; height: 100%; object-fit: contain;">
                    </div>
                    <div class="product-content">
                        <div style="position: absolute; top: 15px; right: 15px; background: linear-gradient(45deg, #f59e0b, #f97316); color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.8rem; font-weight: bold;">الذهبية</div>
                        <h3 class="product-title">
                            <span class="material-icons">auto_awesome</span>
                            الباقة الذهبية
                        </h3>
                        <p class="product-description">باقة متوسطة مثالية للشركات الناشئة والأفراد</p>
                        <div style="font-size: 2rem; font-weight: 900; color: var(--accent-color); margin: 25px 0; text-align: center; background: linear-gradient(45deg, rgba(245, 158, 11, 0.1), rgba(249, 115, 22, 0.05)); padding: 20px; border-radius: 18px;">250 ريال</div>
                        <button class="add-to-cart" data-id="gold-package" data-name="الباقة الذهبية" data-price="250">
                            <span class="material-icons">add_shopping_cart</span>
                            أضف للسلة
                        </button>
                    </div>
                </div>

                <!-- الهوية البصرية -->
                <div class="product-card" data-product="visual-identity">
                    <div style="width: 100%; height: 200px; background: linear-gradient(45deg, var(--secondary-color), var(--accent-color)); display: flex; align-items: center; justify-content: center;">
                        <img src="https://c.top4top.io/p_3520lalva1.png" alt="الهوية البصرية" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="product-content">
                        <h3 class="product-title">
                            <span class="material-icons">palette</span>
                            الهوية البصرية الاحترافية
                        </h3>
                        <p class="product-description">احصل على هوية بصرية متكاملة واحترافية تعكس شخصية علامتك التجارية</p>
                        <div class="product-price">70 ريال</div>
                        <button class="add-to-cart" data-id="visual-identity" data-name="الهوية البصرية الاحترافية" data-price="70">
                            <span class="material-icons">add_shopping_cart</span>
                            أضف للسلة
                        </button>
                    </div>
                </div>

                <!-- موقع إلكتروني -->
                <div class="product-card" data-product="website">
                    <div style="width: 100%; height: 200px; background: linear-gradient(45deg, #10b981, #059669); display: flex; align-items: center; justify-content: center;">
                        <img src="https://g.top4top.io/p_3520jiqbs1.png" alt="موقع إلكتروني" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div class="product-content">
                        <h3 class="product-title">
                            <span class="material-icons">language</span>
                            موقع إلكتروني متكامل
                        </h3>
                        <p class="product-description">موقع إلكتروني احترافي ومتجاوب مع جميع الأجهزة</p>
                        <div class="product-price">100 ريال</div>
                        <button class="add-to-cart" data-id="website" data-name="موقع إلكتروني متكامل" data-price="100">
                            <span class="material-icons">add_shopping_cart</span>
                            أضف للسلة
                        </button>
                    </div>
                </div>

                <!-- متجر إلكتروني -->
                <div class="product-card" data-product="ecommerce">
                    <div style="width: 100%; height: 200px; background: linear-gradient(45deg, #8b5cf6, #a855f7); display: flex; align-items: center; justify-content: center;">
                        <div style="font-size: 4rem; color: white;">🛒</div>
                    </div>
                    <div class="product-content">
                        <h3 class="product-title">
                            <span class="material-icons">store</span>
                            متجر إلكتروني شامل
                        </h3>
                        <p class="product-description">متجر إلكتروني متكامل مع نظام إدارة المحتوى والمدفوعات</p>
                        <div class="product-price">110 ريال</div>
                        <button class="add-to-cart" data-id="ecommerce" data-name="متجر إلكتروني شامل" data-price="110">
                            <span class="material-icons">add_shopping_cart</span>
                            أضف للسلة
                        </button>
                    </div>
                </div>

                <!-- قوالب Canva -->
                <div class="product-card" data-product="canva">
                    <div style="width: 100%; height: 200px; background: linear-gradient(45deg, #ec4899, #f43f5e); display: flex; align-items: center; justify-content: center;">
                        <div style="font-size: 4rem; color: white;">📐</div>
                    </div>
                    <div class="product-content">
                        <h3 class="product-title">
                            <span class="material-icons">design_services</span>
                            قوالب Canva الاحترافية
                        </h3>
                        <p class="product-description">مجموعة من القوالب الاحترافية لجميع احتياجاتك التسويقية</p>
                        <div class="product-price">50 ريال</div>
                        <button class="add-to-cart" data-id="canva" data-name="قوالب Canva الاحترافية" data-price="50">
                            <span class="material-icons">add_shopping_cart</span>
                            أضف للسلة
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Page -->
    <section id="about" class="page-section">
        <div class="container">
            <h2 class="section-title">من نحن</h2>
            <div class="about-content">
                <div class="about-text">
                    <h3 style="color: #3b82f6; font-size: 1.5rem; margin-bottom: 20px;">🌙 متجر Moon</h3>
                    <p>متجر Moon هو وجهتك الموثوقة للحصول على أفضل خدمات التصميم الرقمي والتطوير. نحن فريق متخصص من المصممين والمطورين المبدعين الذين يؤمنون بقوة التصميم في تحويل الأفكار إلى واقع رقمي استثنائي.</p>
                    <br>
                    <p>رغم حداثة انطلاقتنا، استطعنا أن نحقق نجاحات ملموسة في مجال التصميم والتطوير خلال فترة وجيزة، حيث نجحنا في إنجاز العديد من المشاريع المتميزة لعملاء من مختلف القطاعات والمجالات.</p>
                </div>
                <div class="about-features">
                    <h3 style="color: var(--accent-color); margin-bottom: 20px; font-size: 1.3rem;">إنجازاتنا وأرقامنا</h3>
                    <ul>
                        <li>🚀 مشاريع متنوعة ومتميزة في مختلف المجالات</li>
                        <li>🚀 معدل رضا العملاء 99% - شهادة ثقة حقيقية</li>
                        <li>🚀 فريق محترف من أفضل المصممين والمطورين</li>
                        <li>🚀 خبرة متخصصة في السوق السعودي والخليجي</li>
                        <li>🚀 تسليم المشاريع في الوقت المحدد دائماً</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Page -->
    <section id="features" class="page-section">
        <div class="container">
            <h2 class="section-title">لماذا تختار متجر Moon؟</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px; margin-top: 50px;">
                
                <!-- الميزة 1 -->
                <div style="background: linear-gradient(145deg, var(--bg-card), rgba(59, 130, 246, 0.05)); padding: 40px; border-radius: 20px; border: 2px solid var(--border-color); text-align: center; transition: all 0.3s ease;">
                    <div style="width: 80px; height: 80px; background: linear-gradient(45deg, var(--secondary-color), var(--accent-color)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);">
                        <span class="material-icons" style="font-size: 2.5rem; color: white;">flash_on</span>
                    </div>
                    <h3 style="color: var(--accent-color); font-size: 1.4rem; margin-bottom: 15px; font-weight: 700;">تسليم سريع</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">نلتزم بالمواعيد ونسلم مشاريعك في أسرع وقت ممكن بأعلى جودة</p>
                </div>

                <!-- الميزة 2 -->
                <div style="background: linear-gradient(145deg, var(--bg-card), rgba(16, 185, 129, 0.05)); padding: 40px; border-radius: 20px; border: 2px solid rgba(16, 185, 129, 0.2); text-align: center; transition: all 0.3s ease;">
                    <div style="width: 80px; height: 80px; background: linear-gradient(45deg, var(--success-color), #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);">
                        <span class="material-icons" style="font-size: 2.5rem; color: white;">verified</span>
                    </div>
                    <h3 style="color: var(--success-color); font-size: 1.4rem; margin-bottom: 15px; font-weight: 700;">جودة مضمونة</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">نضمن لك الجودة العالية مع 3 تعديلات مجانية لضمان رضاك التام</p>
                </div>

                <!-- الميزة 3 -->
                <div style="background: linear-gradient(145deg, var(--bg-card), rgba(245, 158, 11, 0.05)); padding: 40px; border-radius: 20px; border: 2px solid rgba(245, 158, 11, 0.2); text-align: center; transition: all 0.3s ease;">
                    <div style="width: 80px; height: 80px; background: linear-gradient(45deg, var(--warning-color), #f97316); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; box-shadow: 0 10px 30px rgba(245, 158, 11, 0.3);">
                        <span class="material-icons" style="font-size: 2.5rem; color: white;">savings</span>
                    </div>
                    <h3 style="color: var(--warning-color); font-size: 1.4rem; margin-bottom: 15px; font-weight: 700;">أسعار تنافسية</h3>
                    <p style="color: var(--text-secondary); line-height: 1.7;">أسعار عادلة ومناسبة لجميع الميزانيات مع عروض خاصة مستمرة</p>
                </div>

            </div>
        </div>
    </section>

    <!-- FAQ Page -->
    <section id="faq" class="page-section">
        <div class="container">
            <h2 class="section-title">الأسئلة الشائعة</h2>
            <div style="max-width: 800px; margin: 0 auto;">
                <div class="faq-item" style="background: var(--bg-card); margin-bottom: 15px; border-radius: 10px; border: 2px solid var(--border-color); overflow: hidden;">
                    <div class="faq-question" onclick="toggleFaq(this)" style="padding: 20px; background: rgba(59, 130, 246, 0.2); cursor: pointer; font-weight: bold; color: var(--accent-color); display: flex; justify-content: space-between; align-items: center;">
                        <span>كم يستغرق تصميم الهوية البصرية؟</span>
                        <span>+</span>
                    </div>
                    <div class="faq-answer" style="padding: 0 20px; max-height: 0; overflow: hidden; transition: all 0.3s ease; color: #fff;">
                        <div style="padding: 20px 0;">
                            <p>عادةً ما يستغرق تصميم الهوية البصرية من 3 إلى 7 أيام عمل، حسب تعقيد التصميم ومتطلبات العميل. نحن نحرص على التسليم في الوقت المحدد مع ضمان أعلى جودة.</p>
                        </div>
                    </div>
                </div>

                <div class="faq-item" style="background: var(--bg-card); margin-bottom: 15px; border-radius: 10px; border: 2px solid var(--border-color); overflow: hidden;">
                    <div class="faq-question" onclick="toggleFaq(this)" style="padding: 20px; background: rgba(59, 130, 246, 0.2); cursor: pointer; font-weight: bold; color: var(--accent-color); display: flex; justify-content: space-between; align-items: center;">
                        <span>ما هي طرق الدفع المتاحة؟</span>
                        <span>+</span>
                    </div>
                    <div class="faq-answer" style="padding: 0 20px; max-height: 0; overflow: hidden; transition: all 0.3s ease; color: #fff;">
                        <div style="padding: 20px 0;">
                            <p>نوفر عدة طرق دفع مريحة: التحويل البنكي، STC Pay، URPay، PayPal، وروابط الدفع المباشرة عبر Paylink للشركات المسجلة.</p>
                        </div>
                    </div>
                </div>

                <div class="faq-item" style="background: var(--bg-card); margin-bottom: 15px; border-radius: 10px; border: 2px solid var(--border-color); overflow: hidden;">
                    <div class="faq-question" onclick="toggleFaq(this)" style="padding: 20px; background: rgba(59, 130, 246, 0.2); cursor: pointer; font-weight: bold; color: var(--accent-color); display: flex; justify-content: space-between; align-items: center;">
                        <span>هل يمكنني طلب تعديلات على التصميم؟</span>
                        <span>+</span>
                    </div>
                    <div class="faq-answer" style="padding: 0 20px; max-height: 0; overflow: hidden; transition: all 0.3s ease; color: #fff;">
                        <div style="padding: 20px 0;">
                            <p>بالطبع! نوفر 3 تعديلات مجانية لجميع خدماتنا. إذا كنت بحاجة لتعديلات إضافية، فسنكون سعداء لمناقشة ذلك معك بأسعار مناسبة.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Page -->
    <section id="contact" class="page-section">
        <div class="container">
            <h2 class="section-title">تواصل معنا</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; margin-top: 40px;">
                <div style="background: var(--bg-card); padding: 30px; border-radius: 15px; text-align: center; border: 2px solid var(--border-color);">
                    <div style="font-size: 2.5rem; color: #3b82f6; margin-bottom: 15px;">📱</div>
                    <h4 style="color: var(--accent-color); font-size: 1.2rem; margin: 10px 0; font-weight: bold;">واتساب</h4>
                    <p>+966 571 653 884</p>
                    <p style="font-size: 0.9rem; color: #999; margin-top: 5px;">متاح 24/7 للرد السريع</p>
                </div>
                
                <div style="background: var(--bg-card); padding: 30px; border-radius: 15px; text-align: center; border: 2px solid var(--border-color);">
                    <div style="font-size: 2.5rem; color: #3b82f6; margin-bottom: 15px;">🕙</div>
                    <h4 style="color: var(--accent-color); font-size: 1.2rem; margin: 10px 0; font-weight: bold;">ساعات العمل</h4>
                    <p>24/7 دعم مستمر</p>
                    <p style="font-size: 0.9rem; color: #999; margin-top: 5px;">نرد على استفساراتكم في أسرع وقت</p>
                </div>
                
                <div style="background: var(--bg-card); padding: 30px; border-radius: 15px; text-align: center; border: 2px solid var(--border-color);">
                    <div style="font-size: 2.5rem; color: #3b82f6; margin-bottom: 15px;">🌐</div>
                    <h4 style="color: var(--accent-color); font-size: 1.2rem; margin: 10px 0; font-weight: bold;">التغطية</h4>
                    <p>السعودية والخليج</p>
                    <p style="font-size: 0.9rem; color: #999; margin-top: 5px;">نخدم عملاء في جميع أنحاء الخليج</p>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 50px;">
                <a href="https://wa.me/966571653884?text=السلام عليكم، أود الاستفسار عن خدماتكم" target="_blank" class="cta-button">
                    📱 تواصل معنا عبر الواتساب
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div>
                    <p>&copy; 2025 جميع الحقوق محفوظة لدى متجر Moon</p>
                    <p style="font-size: 0.9rem; color: #999; margin-top: 5px;">تصميم وتطوير متجر Moon</p>
                </div>
                <div class="footer-social">
                    <a href="https://wa.me/966571653884" title="واتساب" target="_blank">📱</a>
                    <a href="#" title="تويتر" onclick="showNotification('قريباً - تابعونا!', 'info')">🦅</a>
                    <a href="#" title="إنستغرام" onclick="showNotification('قريباً - تابعونا!', 'info')">📷</a>
                    <a href="#" title="لينكد إن" onclick="showNotification('قريباً - تابعونا!', 'info')">💼</a>
                    <a href="#" title="يوتيوب" onclick="showNotification('قريباً - تابعونا!', 'info')">🎥</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // إعدادات النظام - محدث للاتصال بـ API
        const API_CONFIG = {
            BASE_URL: 'https://moonstore-api.kesug.com',
            CREATE_ORDER: '/create-order.php',
            SUCCESS_PAGE: '/success.php',
            CANCEL_PAGE: '/cancel.php',
            WEBHOOK: '/webhook.php'
        };

        // متغيرات النظام
        let cart = [];
        let total = 0;
        let isProcessingOrder = false;

        // تحميل الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            initializeStore();
            updateCartDisplay();
            setupEventListeners();
            
            // التحقق من حالة الدفع في URL
            checkPaymentStatus();
        });

        // التحقق من نتيجة الدفع
        function checkPaymentStatus() {
            const urlParams = new URLSearchParams(window.location.search);
            const success = urlParams.get('success');
            const cancelled = urlParams.get('cancelled');
            
            if (success === '1') {
                showNotification('🎉 تم الدفع بنجاح! شكراً لك لاختيار متجر Moon', 'success');
                // مسح السلة
                cart = [];
                updateCartDisplay();
                // إزالة معاملات URL
                window.history.replaceState({}, document.title, window.location.pathname);
            } else if (cancelled === '1') {
                showNotification('❌ تم إلغاء الدفع. يمكنك المحاولة مرة أخرى', 'info');
                // إزالة معاملات URL
                window.history.replaceState({}, document.title, window.location.pathname);
            }
        }

        // تهيئة المتجر
        function initializeStore() {
            console.log('🌙 متجر Moon - تم التحميل بنجاح!');
            console.log('🔗 API متصل على:', API_CONFIG.BASE_URL);
            
            // إضافة مستمعي الأحداث للأزرار
            const addToCartButtons = document.querySelectorAll('.add-to-cart');
            addToCartButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const productData = {
                        id: this.dataset.id,
                        name: this.dataset.name,
                        price: parseFloat(this.dataset.price)
                    };
                    addToCart(productData);
                });
            });
            
            // اختبار الاتصال بـ API
            testAPIConnection();
        }

        // اختبار الاتصال بـ API
        async function testAPIConnection() {
            try {
                const response = await fetch(API_CONFIG.BASE_URL + API_CONFIG.WEBHOOK + '?test=1');
                const result = await response.json();
                
                if (result.status === 'Webhook is working') {
                    console.log('✅ API Connection: SUCCESS');
                    console.log('📊 Server Info:', result.server_info);
                } else {
                    console.warn('⚠️ API Connection: Unexpected response');
                }
            } catch (error) {
                console.error('❌ API Connection: FAILED', error);
                showNotification('⚠️ مشكلة في الاتصال بخادم الدفع. النظام يعمل في الوضع المحدود.', 'error');
            }
        }

        // إعداد مستمعي الأحداث
        function setupEventListeners() {
            // إغلاق الموديالات عند الضغط على Escape
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeCart();
                    closeOrderModal();
                }
            });

            // إغلاق السلة عند النقر على الخلفية
            document.getElementById('overlay').addEventListener('click', closeCart);
        }

        // إضافة منتج للسلة
        function addToCart(productData) {
            if (!productData.id || !productData.name || !productData.price) {
                showNotification('⚠️ بيانات المنتج غير صحيحة!', 'error');
                return;
            }

            // التحقق من وجود المنتج مسبقاً
            const existingProduct = cart.find(item => item.id === productData.id);
            if (existingProduct) {
                showNotification('⚠️ المنتج موجود في السلة بالفعل!', 'info');
                toggleCart();
                return;
            }

            // إضافة المنتج للسلة
            cart.push({
                id: productData.id,
                name: productData.name,
                price: productData.price,
                quantity: 1
            });

            updateCartDisplay();
            showNotification('✅ تم إضافة المنتج للسلة بنجاح!', 'success');
            
            // فتح السلة بعد ثانية
            setTimeout(() => {
                toggleCart();
            }, 1000);
        }

        // تحديث عرض السلة
        function updateCartDisplay() {
            const cartCount = document.getElementById('cart-count');
            const cartItems = document.getElementById('cart-items');
            const cartFooter = document.getElementById('cart-footer');
            const cartTotal = document.getElementById('cart-total');

            // تحديث عدد المنتجات
            cartCount.textContent = cart.length;

            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="empty-cart" style="text-align: center; color: #ccc; padding: 40px 20px;">
                        <span class="material-icons" style="font-size: 3rem; opacity: 0.5;">shopping_cart</span>
                        <p>السلة فارغة</p>
                        <p style="font-size: 0.9rem; color: #999; margin-top: 10px;">أضف منتجات لتبدأ التسوق</p>
                    </div>
                `;
                cartFooter.style.display = 'none';
                return;
            }

            // حساب الإجمالي
            total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

            // عرض المنتجات
            let itemsHTML = '';
            cart.forEach((item, index) => {
                itemsHTML += `
                    <div class="cart-item" style="background: var(--bg-card); padding: 20px; border-radius: 15px; margin-bottom: 15px; border: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="color: var(--accent-color); font-weight: 700; margin-bottom: 5px; font-size: 1.1rem;">${item.name}</div>
                            <div style="color: #3b82f6; font-size: 1.1rem; font-weight: 600;">${item.price} ريال</div>
                        </div>
                        <button onclick="removeFromCart(${index})" style="background: linear-gradient(45deg, var(--error-color), #dc2626); color: white; border: none; padding: 8px 12px; border-radius: 50%; cursor: pointer; font-weight: bold; width: 35px; height: 35px;">×</button>
                    </div>
                `;
            });

            cartItems.innerHTML = itemsHTML;
            cartTotal.textContent = `الإجمالي: ${total} ريال`;
            cartFooter.style.display = 'block';
        }

        // حذف منتج من السلة
        function removeFromCart(index) {
            const removedItem = cart[index];
            cart.splice(index, 1);
            updateCartDisplay();
            showNotification(`🗑️ تم حذف "${removedItem.name}" من السلة`, 'info');
        }

        // تبديل السلة
        function toggleCart() {
            const sidebar = document.getElementById('cart-sidebar');
            const overlay = document.getElementById('overlay');
            
            if (sidebar.classList.contains('open')) {
                closeCart();
            } else {
                sidebar.classList.add('open');
                overlay.style.opacity = '1';
                overlay.style.visibility = 'visible';
                document.body.style.overflow = 'hidden';
            }
        }

        // إغلاق السلة
        function closeCart() {
            const sidebar = document.getElementById('cart-sidebar');
            const overlay = document.getElementById('overlay');
            sidebar.classList.remove('open');
            overlay.style.opacity = '0';
            overlay.style.visibility = 'hidden';
            document.body.style.overflow = 'auto';
        }

        // إتمام الطلب - محدث للعمل مع API
        async function proceedToCheckout() {
            if (cart.length === 0) {
                showNotification('⚠️ السلة فارغة!', 'error');
                return;
            }

            if (isProcessingOrder) {
                showNotification('⏳ جاري معالجة الطلب...', 'info');
                return;
            }

            const checkoutBtn = document.getElementById('checkout-btn');
            const originalText = checkoutBtn.innerHTML;
            
            try {
                // تغيير حالة الزر
                isProcessingOrder = true;
                checkoutBtn.innerHTML = '<span class="material-icons">hourglass_empty</span> جاري الإرسال...';
                checkoutBtn.disabled = true;
                checkoutBtn.classList.add('loading');

                // تحضير بيانات الطلب
                const orderData = {
                    products: cart.map(item => ({
                        id: item.id,
                        name: item.name,
                        price: item.price,
                        quantity: item.quantity,
                        description: `منتج من متجر Moon - ${item.name}`
                    })),
                    customer_name: 'عميل متجر Moon',
                    customer_mobile: '966571653884',
                    customer_email: '',
                    note: `طلب من متجر Moon - إجمالي ${cart.length} منتج`,
                    discount: 0
                };

                console.log('🚀 إرسال طلب للـ API:', orderData);

                // إرسال الطلب للـ API
                const response = await fetch(API_CONFIG.BASE_URL + API_CONFIG.CREATE_ORDER, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(orderData)
                });

                console.log('📥 استجابة API:', response.status, response.statusText);

                const result = await response.json();
                console.log('📋 بيانات الاستجابة:', result);

                if (!response.ok || !result.success) {
                    throw new Error(result.error || `HTTP ${response.status}: ${response.statusText}`);
                }

                // إظهار موديال النجاح
                showOrderSuccess(result);

                // توجيه للدفع بعد ثانيتين
                setTimeout(() => {
                    console.log('🔗 توجيه للدفع:', result.payment_url);
                    window.open(result.payment_url, '_blank');
                    
                    // مسح السلة وإغلاق الموديالات
                    setTimeout(() => {
                        cart = [];
                        updateCartDisplay();
                        closeCart();
                        closeOrderModal();
                    }, 1000);
                }, 2000);

            } catch (error) {
                console.error('❌ خطأ في إتمام الطلب:', error);
                
                // في حالة الخطأ، التحول للواتساب كبديل
                showNotification(`❌ مشكلة في النظام. سيتم الانتقال للواتساب...`, 'error');
                
                setTimeout(() => {
                    proceedToWhatsApp();
                }, 2000);
                
            } finally {
                // إعادة تعيين الزر
                isProcessingOrder = false;
                checkoutBtn.innerHTML = originalText;
                checkoutBtn.disabled = false;
                checkoutBtn.classList.remove('loading');
            }
        }

        // البديل: الطلب عبر الواتساب
        function proceedToWhatsApp() {
            if (cart.length === 0) return;
            
            // إنشاء رسالة واتساب
            let message = `السلام عليكم، أود طلب الخدمات التالية من متجر Moon:\n\n`;
            
            cart.forEach((item, index) => {
                message += `${index + 1}. ${item.name} - ${item.price} ريال\n`;
            });
            
            message += `\n💰 الإجمالي: ${total} ريال\n\nأرجو التواصل معي لإتمام الطلب`;
            
            // فتح واتساب
            const whatsappUrl = `https://wa.me/966571653884?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
            
            // إظهار رسالة نجاح
            showNotification('📱 تم فتح واتساب لإتمام الطلب!', 'success');
            
            // مسح السلة
            cart = [];
            updateCartDisplay();
            closeCart();
        }

        // إظهار موديال النجاح
        function showOrderSuccess(orderResult) {
            const modal = document.getElementById('order-modal');
            const orderDetails = document.getElementById('order-details');
            
            if (!modal || !orderDetails) {
                console.log('⚠️ Order modal not found, using notification instead');
                showNotification('✅ تم إنشاء الطلب بنجاح! جاري التوجيه للدفع...', 'success');
                return;
            }
            
            orderDetails.innerHTML = `
                <div style="text-align: right; margin: 20px 0;">
                    <p><strong>رقم الطلب:</strong> ${orderResult.order_id}</p>
                    <p><strong>المبلغ:</strong> ${orderResult.total} ريال</p>
                    <p><strong>عدد المنتجات:</strong> ${cart.length}</p>
                    <p><strong>رقم المعاملة:</strong> ${orderResult.transaction_no || 'سيتم تحديده بعد الدفع'}</p>
                </div>
            `;
            
            modal.classList.add('active');
        }

        // إغلاق موديال الطلب
        function closeOrderModal() {
            const modal = document.getElementById('order-modal');
            if (modal) {
                modal.classList.remove('active');
            }
        }

        // عرض الإشعارات
        function showNotification(message, type = 'success') {
            // حذف الإشعارات الموجودة
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(notif => notif.remove());

            // إنشاء الإشعار
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);

            // إظهار الإشعار
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);

            // إخفاء الإشعار
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 400);
            }, 5000);
        }

        // إدارة الصفحات
        function showPage(pageId) {
            // إخفاء جميع الصفحات
            const allSections = document.querySelectorAll('.page-section');
            allSections.forEach(section => {
                section.classList.remove('active');
            });

            // إظهار الصفحة المطلوبة
            const targetSection = document.getElementById(pageId);
            if (targetSection) {
                targetSection.classList.add('active');
                
                // تحديث الرابط النشط في القائمة
                updateActiveNavLink(pageId);
                
                // التمرير إلى أعلى الصفحة
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }
        }

        // تحديث الرابط النشط في القائمة
        function updateActiveNavLink(pageId) {
            const navLinks = document.querySelectorAll('.nav-links a');
            navLinks.forEach(link => {
                link.classList.remove('active');
            });

            const currentLink = document.querySelector(`[onclick*="showPage('${pageId}')"]`);
            if (currentLink) {
                currentLink.classList.add('active');
            }
        }

        // القائمة المحمولة
        function toggleMobileMenu() {
            const navLinks = document.getElementById('nav-links');
            navLinks.classList.toggle('open');
            
            // تبديل أيقونة القائمة
            const menuBtn = document.querySelector('.mobile-menu-btn .material-icons');
            if (navLinks.classList.contains('open')) {
                menuBtn.textContent = 'close';
                document.body.style.overflow = 'hidden';
            } else {
                menuBtn.textContent = 'menu';
                document.body.style.overflow = 'auto';
            }
        }

        function closeMobileMenu() {
            const navLinks = document.getElementById('nav-links');
            const menuBtn = document.querySelector('.mobile-menu-btn .material-icons');
            navLinks.classList.remove('open');
            menuBtn.textContent = 'menu';
            document.body.style.overflow = 'auto';
        }

        // تبديل الأسئلة الشائعة
        function toggleFaq(element) {
            const answer = element.nextElementSibling;
            const icon = element.querySelector('span:last-child');

            if (answer.classList.contains('active')) {
                answer.classList.remove('active');
                answer.style.maxHeight = '0';
                icon.textContent = '+';
            } else {
                // إغلاق جميع الأسئلة الأخرى
                document.querySelectorAll('.faq-answer').forEach(ans => {
                    ans.classList.remove('active');
                    ans.style.maxHeight = '0';
                });
                document.querySelectorAll('.faq-question span:last-child').forEach(ic => {
                    ic.textContent = '+';
                });

                // فتح السؤال الحالي
                answer.classList.add('active');
                answer.style.maxHeight = answer.scrollHeight + 'px';
                icon.textContent = '-';
            }
        }

        // فتح الصورة في موديال
        function openImageModal(imageSrc) {
            // إنشاء الموديال إذا لم يكن موجوداً
            let modal = document.getElementById('image-modal');
            if (!modal) {
                modal = document.createElement('div');
                modal.id = 'image-modal';
                modal.className = 'image-modal';
                modal.innerHTML = `
                    <div class="modal-content">
                        <span class="close-modal" onclick="closeImageModal()">&times;</span>
                        <img id="modal-image" src="" alt="Moon Store Design">
                        <div class="modal-overlay-text">
                            <h3>🌙 مرحباً بك في متجر Moon</h3>
                            <p>اكتشف أفضل خدمات التصميم الرقمي</p>
                        </div>
                    </div>
                `;
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.95);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 5000;
                    opacity: 0;
                    visibility: hidden;
                    transition: all 0.5s ease;
                    backdrop-filter: blur(15px);
                `;
                document.body.appendChild(modal);
            }
            
            const modalImage = document.getElementById('modal-image');
            modalImage.src = imageSrc;
            
            modal.style.opacity = '1';
            modal.style.visibility = 'visible';
            document.body.style.overflow = 'hidden';
            
            // إغلاق عند النقر على الخلفية
            modal.onclick = function(e) {
                if (e.target === modal) {
                    closeImageModal();
                }
            };
        }

        function closeImageModal() {
            const modal = document.getElementById('image-modal');
            if (modal) {
                modal.style.opacity = '0';
                modal.style.visibility = 'hidden';
                document.body.style.overflow = 'auto';
            }
        }

        // تأثيرات التمرير
        window.addEventListener('scroll', function() {
            const header = document.getElementById('main-header');
            if (window.scrollY > 100) {
                header.style.background = 'rgba(15, 23, 42, 0.95)';
            } else {
                header.style.background = 'rgba(255, 255, 255, 0.05)';
            }
        });

        // متغيرات عامة يمكن الوصول إليها عالمياً
        window.showPage = showPage;
        window.toggleCart = toggleCart;
        window.closeCart = closeCart;
        window.proceedToCheckout = proceedToCheckout;
        window.removeFromCart = removeFromCart;
        window.toggleMobileMenu = toggleMobileMenu;
        window.closeMobileMenu = closeMobileMenu;
        window.toggleFaq = toggleFaq;
        window.openImageModal = openImageModal;
        window.closeImageModal = closeImageModal;
        window.closeOrderModal = closeOrderModal;
        window.showNotification = showNotification;
    </script>
</body>
</html>
